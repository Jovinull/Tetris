#include "render/font5x7.h"

/*
  Fonte 5x7 mÃ­nima (ASCII subset) para HUD e menus.
  Cada linha: 5 bits (LSB->coluna).
*/
static const Font5x7Glyph GLYPH_SPACE = {{0,0,0,0,0,0,0}};
static const Font5x7Glyph GLYPH_QMARK = {{0x0E,0x11,0x02,0x04,0x04,0x00,0x04}};
static const Font5x7Glyph GLYPH_COLON = {{0x00,0x04,0x00,0x00,0x04,0x00,0x00}};
static const Font5x7Glyph GLYPH_DOT   = {{0x00,0x00,0x00,0x00,0x00,0x00,0x04}};
static const Font5x7Glyph GLYPH_DASH  = {{0x00,0x00,0x00,0x1F,0x00,0x00,0x00}};
static const Font5x7Glyph GLYPH_SLASH = {{0x01,0x02,0x04,0x08,0x10,0x00,0x00}};

static const Font5x7Glyph DIGITS[10] = {
  {{0x0E,0x11,0x13,0x15,0x19,0x11,0x0E}}, //0
  {{0x04,0x0C,0x04,0x04,0x04,0x04,0x0E}}, //1
  {{0x0E,0x11,0x01,0x02,0x04,0x08,0x1F}}, //2
  {{0x1F,0x02,0x04,0x02,0x01,0x11,0x0E}}, //3
  {{0x02,0x06,0x0A,0x12,0x1F,0x02,0x02}}, //4
  {{0x1F,0x10,0x1E,0x01,0x01,0x11,0x0E}}, //5
  {{0x06,0x08,0x10,0x1E,0x11,0x11,0x0E}}, //6
  {{0x1F,0x01,0x02,0x04,0x08,0x08,0x08}}, //7
  {{0x0E,0x11,0x11,0x0E,0x11,0x11,0x0E}}, //8
  {{0x0E,0x11,0x11,0x0F,0x01,0x02,0x0C}}, //9
};

static const Font5x7Glyph UPPER[26] = {
  {{0x0E,0x11,0x11,0x1F,0x11,0x11,0x11}}, //A
  {{0x1E,0x11,0x11,0x1E,0x11,0x11,0x1E}}, //B
  {{0x0E,0x11,0x10,0x10,0x10,0x11,0x0E}}, //C
  {{0x1E,0x11,0x11,0x11,0x11,0x11,0x1E}}, //D
  {{0x1F,0x10,0x10,0x1E,0x10,0x10,0x1F}}, //E
  {{0x1F,0x10,0x10,0x1E,0x10,0x10,0x10}}, //F
  {{0x0E,0x11,0x10,0x17,0x11,0x11,0x0E}}, //G
  {{0x11,0x11,0x11,0x1F,0x11,0x11,0x11}}, //H
  {{0x0E,0x04,0x04,0x04,0x04,0x04,0x0E}}, //I
  {{0x01,0x01,0x01,0x01,0x11,0x11,0x0E}}, //J
  {{0x11,0x12,0x14,0x18,0x14,0x12,0x11}}, //K
  {{0x10,0x10,0x10,0x10,0x10,0x10,0x1F}}, //L
  {{0x11,0x1B,0x15,0x15,0x11,0x11,0x11}}, //M
  {{0x11,0x19,0x15,0x13,0x11,0x11,0x11}}, //N
  {{0x0E,0x11,0x11,0x11,0x11,0x11,0x0E}}, //O
  {{0x1E,0x11,0x11,0x1E,0x10,0x10,0x10}}, //P
  {{0x0E,0x11,0x11,0x11,0x15,0x12,0x0D}}, //Q
  {{0x1E,0x11,0x11,0x1E,0x14,0x12,0x11}}, //R
  {{0x0F,0x10,0x10,0x0E,0x01,0x01,0x1E}}, //S
  {{0x1F,0x04,0x04,0x04,0x04,0x04,0x04}}, //T
  {{0x11,0x11,0x11,0x11,0x11,0x11,0x0E}}, //U
  {{0x11,0x11,0x11,0x11,0x11,0x0A,0x04}}, //V
  {{0x11,0x11,0x11,0x15,0x15,0x1B,0x11}}, //W
  {{0x11,0x11,0x0A,0x04,0x0A,0x11,0x11}}, //X
  {{0x11,0x11,0x0A,0x04,0x04,0x04,0x04}}, //Y
  {{0x1F,0x01,0x02,0x04,0x08,0x10,0x1F}}, //Z
};

const Font5x7Glyph* font5x7_get(char c) {
  if (c == ' ') return &GLYPH_SPACE;
  if (c == '?') return &GLYPH_QMARK;
  if (c == ':') return &GLYPH_COLON;
  if (c == '.') return &GLYPH_DOT;
  if (c == '-') return &GLYPH_DASH;
  if (c == '/') return &GLYPH_SLASH;

  if (c >= '0' && c <= '9') return &DIGITS[c - '0'];

  if (c >= 'a' && c <= 'z') c = (char)(c - 32);
  if (c >= 'A' && c <= 'Z') return &UPPER[c - 'A'];

  return &GLYPH_QMARK;
}